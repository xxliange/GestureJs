!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).GestureJs=e()}(this,function(){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var t=function(t,e,i){return e&&h(t.prototype,e),i&&h(t,i),t};function h(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var a=(t(e,[{key:"add",value:function(t){this.handlers.push(t)}},{key:"del",value:function(t){t||(this.handlers=[]);for(var e=this.handlers.length;0<=e;e--)this.handlers[e]===t&&this.handlers.splice(e,1)}},{key:"dispatch",value:function(){for(var t=0,e=this.handlers.length;t<e;t++){var i=this.handlers[t];"function"==typeof i&&i.apply(this.el,arguments)}}}]),e);function e(t){s(this,e),this.handlers=[],this.el=t}var i=(t(n,[{key:"isTarget",value:function(t,e){for(;null!=t&&null!=t&&"BODY"!=t.tagName.toUpperCase();){if(t.matches(e))return t;t=t.parentNode}return null}},{key:"wrapFunc",value:function(t,e){var i=new a(t);return i.add(e),i}}]),n);function n(t){s(this,n)}function o(t){return new i(t)}var r=(t(u,[{key:"_touch",value:function(t){var e=this;this.e=t.target;var i=t.touches?t.touches[0]:t,s=Date.now();if(this.touch.startX=i.pageX,this.touch.startY=i.pageY,this.touch.startTime=s,this.touch.deltaTime=this.touch.startTime-(this.touch.lastTime||this.touch.startTime),this.touchStart.dispatch(t,this.target),null!==this.preTapPostion.x&&(this.isDoubleTap=0<this.touch.deltaTime&&this.touch.deltaTime<250&&Math.abs(this.preTapPostion.x-this.touch.startX)<30&&Math.abs(this.preTapPostion.y-this.touch.startY)<30,this.isDoubleTap&&this._cancelSingleTap()),this.preTapPostion.x=this.touch.startX,this.preTapPostion.y=this.touch.startY,this.touch.lastTime=this.touch.startTime,this.preV,1<t.touches.length){this._cancelLongTap(),this._cancelSingleTap();var h={x:t.touches[1].pageX-this.touch.startX,y:t.touches[1].pageY-this.touch.startY};console.log(h)}this._preventTap=!1,this.isLongTap=!1,this.longTapTimeout=setTimeout(function(){e.longTap.dispatch(t,e.target),e._preventTap=!0,e.isLongTap=!0},750)}},{key:"_move",value:function(t){if(t.touches){this.preV;var e=t.touches.length,i=t.touches[0].pageX,s=t.touches[0].pageY;if(this.isDoubleTap=!1,null!==this.touch.moveX){t.deltaX=i-this.touch.moveX,t.deltaY=s-this.touch.moveY,this.touch.diffX=t.deltaX;var h=Math.abs(this.touch.startX-this.touch.moveX),a=Math.abs(this.touch.startY-this.touch.moveY);(10<h||10<a)&&(this._preventTap=!0)}else t.deltaX=0,t.deltaY=0;this.pressMove.dispatch(t,this.target),this.touchMove.dispatch(t,this.target),this._cancelLongTap(),this.touch.moveX=i,this.touch.moveY=s,1<e&&t.preventDefault()}}},{key:"_end",value:function(t){var e=this;if(t.preventDefault(),t.changedTouches){if(this._cancelLongTap(),t.touches.length<2&&(this.sx2=this.sy2=null),this.touch.moveX&&30<Math.abs(this.touch.startX-this.touch.moveX)||this.touch.moveY&&30<Math.abs(this.touch.startY-this.touch.moveY)){var i=~~((this.touch.moveX||0)-this.touch.startX),s=~~((this.touch.moveY||0)-this.touch.startY);if(Math.abs(i)<Math.abs(s))s<0?this.pressUp.dispatch(t,this.target):this.pressDown.dispatch(t,this.target);else{var h=this.touch.diffX;t.diffX=h,i<0?this.pressLeft.dispatch(t,this.target):this.pressRight.dispatch(t,this.target)}}else this.tapTimeout=setTimeout(function(){e._preventTap||e.tap.dispatch(t,e.target),e.isDoubleTap&&(e.doubleTap.dispatch(t,e.target),e.isDoubleTap=!1)},0),this.isDoubleTap||this.isLongTap||(this.singleTapTimeout=setTimeout(function(){e.singleTap.dispatch(t,e.target)},250));this.touchEnd.dispatch(t,this.target),this.preV.x=0,this.preV.y=0,this.touch.startX=null,this.touch.startY=null,this.touch.moveX=null,this.touch.moveY=null}}},{key:"_cancelLongTap",value:function(){clearTimeout(this.longTapTimeout)}},{key:"_cancelSingleTap",value:function(){clearTimeout(this.singleTapTimeout)}},{key:"_emit",value:function(t,e){this.handles[t]||(this.handles[t]=[]);var i=o().isTarget(this.e,this.selector);if(i||!this.selector){this.selector&&(this.params.selector=i);for(var s=0,h=this.handles[t].length;s<h;s++)"function"==typeof this.handles[t][s]&&this.handles[t][s](e,this.params)}return!0}},{key:"on",value:function(t,e){return this.handles[t]||(this.handles[t]=[]),this.handles[t].push(e),this}},{key:"_init",value:function(){this.touch={},this.movetouch={},this.params={zoom:1,deltaX:0,deltaY:0,diffX:0,diffY:0,angle:0,direction:""}}},{key:"cancelAll",value:function(){this._preventTap=!0,clearTimeout(this.singleTapTimeout),clearTimeout(this.longTapTimeout),clearTimeout(this.tapTimeout)}},{key:"_cancel",value:function(t){this.cancelAll(),this.touchCancel.dispatch(t,this.target)}},{key:"destroy",value:function(){return this.singleTapTimeout&&clearTimeout(this.singleTapTimeout),this.longTapTimeout&&clearTimeout(this.longTapTimeout),this.tapTimeout&&clearTimeout(this.tapTimeout),this.target.removeEventListener("touchstart",this._touch),this.target.removeEventListener("touchmove",this._move),this.target.removeEventListener("touchend",this._end),this.target.removeEventListener("touchcancel",this._cancel),this.touchStart.del(),this.touchMove.del(),this.touchCancel.del(),this.touchEnd.del(),this.singleTap.del(),this.longTap.del(),this.doubleTap.del(),this.tap.del(),null}}]),u);function u(t,e){if(s(this,u),this.target=t instanceof HTMLElement?t:"string"==typeof t?document.querySelector(t):null,!this.target)throw new Error("请绑定元素!");this._touch=this._touch.bind(this),this._move=this._move.bind(this),this._end=this._end.bind(this),this._cancel=this._cancel.bind(this),this.target.addEventListener("touchstart",this._touch.bind(this),!1),this.target.addEventListener("touchmove",this._move.bind(this),!1),this.target.addEventListener("touchend",this._end.bind(this),!1),this.target.addEventListener("touchcancel",this._cancel.bind(this),!1),this.preV={x:null,y:null},this.isDoubleTap=!1,this.isLongTap=!1,this.params={},this.touch={startX:null,startY:null,moveX:null,moveY:null,diffX:null,startTime:null,deltaTime:null,lastTime:null},this.movetouch={},this.pretouch={},this.longTapTimeout=this.singleTapTimeout=null,this.tapTimeout=null,this.handles={},this.preTapPostion={x:null,y:null};function i(){}this.touchStart=o().wrapFunc(this.target,e.touchStart||i),this.touchMove=o().wrapFunc(this.target,e.touchMove||i),this.touchCancel=o().wrapFunc(this.target,e.touchCancel||i),this.touchEnd=o().wrapFunc(this.target,e.touchEnd||i),this.singleTap=o().wrapFunc(this.target,e.singleTap||i),this.longTap=o().wrapFunc(this.target,e.longTap||i),this.doubleTap=o().wrapFunc(this.target,e.doubleTap||i),this.tap=o().wrapFunc(this.target,e.tap||i),this.pressMove=o().wrapFunc(this.target,e.pressMove||i),this.pressUp=o().wrapFunc(this.target,e.pressUp||i),this.pressDown=o().wrapFunc(this.target,e.pressDown||i),this.pressLeft=o().wrapFunc(this.target,e.pressLeft||i),this.pressRight=o().wrapFunc(this.target,e.pressRight||i)}try{document}catch(t){throw new Error("请在浏览器环境下运行")}var l=document.createElement("style");return l.type="text/css",l.innerHTML="body{    margin: 0;    padding: 0;}li{    list-style: none;}.gestureDom_wrap{    width: 100px;    height: 100px;    background: #f7c695;    border-radius: 100%;}.gestureDom_info{    width: 100%;    text-align: center;    position: fixed;    padding: 20px 0px;    bottom: 10vh;    font-size: 40px;    font-weight: 600;    color: #000;}.gestureDom_listWrap{    width: 100%;    height: 100px;    position: relative;    overflow: hidden;}.gestureDom_listMain{    height: 100%;    position: absolute;    top: 0;    left: 0;    display: -webkit-box;    display: -webkit-flex;    display: -ms-flexbox;    display: flex;    white-space: nowrap;}.gestureDom_listItem{    width: 100px;    margin-right: 10px;    background: #f7c695;    display: -webkit-box;    display: -webkit-flex;    display: -ms-flexbox;    display: flex;    -webkit-box-align: center;    -webkit-align-items: center;        -ms-flex-align: center;            align-items: center;    -webkit-box-pack: center;    -webkit-justify-content: center;        -ms-flex-pack: center;            justify-content: center;}",document.getElementsByTagName("HEAD").item(0).appendChild(l),window.Gesture||r});
//# sourceMappingURL=gesture.min.js.map

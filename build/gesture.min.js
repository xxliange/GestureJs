!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).GestureJs=e()}(this,function(){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var t=function(t,e,s){return e&&h(t.prototype,e),s&&h(t,s),t};function h(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=(t(e,[{key:"add",value:function(t){this.handlers.push(t)}},{key:"del",value:function(t){t||(this.handlers=[]);for(var e=this.handlers.length;0<=e;e--)this.handlers[e]===t&&this.handlers.splice(e,1)}},{key:"dispatch",value:function(){for(var t=0,e=this.handlers.length;t<e;t++){var s=this.handlers[t];"function"==typeof s&&s.apply(this.el,arguments)}}}]),e);function e(t){i(this,e),this.handlers=[],this.el=t}var s=(t(n,[{key:"isTarget",value:function(t,e){for(;null!=t&&null!=t&&"BODY"!=t.tagName.toUpperCase();){if(t.matches(e))return t;t=t.parentNode}return null}},{key:"wrapFunc",value:function(t,e){var s=new a(t);return s.add(e),s}}]),n);function n(t){i(this,n)}function o(t){return new s(t)}var u=(t(r,[{key:"_touch",value:function(t){var e=this;this.e=t.target;var s=t.touches?t.touches[0]:t,i=Date.now();if(this.touch.startX=s.pageX,this.touch.startY=s.pageY,this.touch.startTime=i,this.touch.deltaTime=this.touch.startTime-(this.touch.lastTime||this.touch.startTime),this.touchStart.dispatch(t,this.target),null!==this.preTapPostion.x&&(this.isDoubleTap=0<this.touch.deltaTime&&this.touch.deltaTime<250&&Math.abs(this.preTapPostion.x-this.touch.startX)<30&&Math.abs(this.preTapPostion.y-this.touch.startY)<30,this.isDoubleTap&&this._cancelSingleTap()),this.preTapPostion.x=this.touch.startX,this.preTapPostion.y=this.touch.startY,this.touch.lastTime=this.touch.startTime,this.preV,1<t.touches.length){this._cancelLongTap(),this._cancelSingleTap();var h={x:t.touches[1].pageX-this.touch.startX,y:t.touches[1].pageY-this.touch.startY};console.log(h)}this._preventTap=!1,this.longTapTimeout=setTimeout(function(){e.longTap.dispatch(t,e.target),e._preventTap=!0},750)}},{key:"_move",value:function(t){if(t.touches){this.preV;var e=t.touches.length,s=t.touches[0].pageX,i=t.touches[0].pageY;if(this.isDoubleTap=!1,null!==this.touch.moveX){t.deltaX=s-this.touch.moveX,t.deltaY=i-this.touch.moveY;var h=Math.abs(this.touch.startX-this.touch.moveX),a=Math.abs(this.touch.startY-this.touch.moveY);(10<h||10<a)&&(this._preventTap=!0)}else t.deltaX=0,t.deltaY=0;this.pressMove.dispatch(t,this.target),this.touchMove.dispatch(t,this.target),this._cancelLongTap(),this.touch.moveX=s,this.touch.moveY=i,1<e&&t.preventDefault()}}},{key:"_end",value:function(t){var e=this;if(t.changedTouches){if(this._cancelLongTap(),t.touches.length<2&&(this.sx2=this.sy2=null),this.touch.moveX&&30<Math.abs(this.touch.startX-this.touch.moveX)||this.touch.moveY&&30<Math.abs(this.touch.startY-this.touch.moveY)){var s=~~((this.touch.moveX||0)-this.touch.startX),i=~~((this.touch.moveY||0)-this.touch.startY);Math.abs(s)<Math.abs(i)?i<0?this.pressUp.dispatch(t,this.target):this.pressDown.dispatch(t,this.target):s<0?this.pressLeft.dispatch(t,this.target):this.pressRight.dispatch(t,this.target)}else this.tapTimeout=setTimeout(function(){e._preventTap||e.tap.dispatch(t,e.target),e.isDoubleTap&&(e.doubleTap.dispatch(t,e.target),e.isDoubleTap=!1)},0),this.isDoubleTap||(this.singleTapTimeout=setTimeout(function(){e.singleTap.dispatch(t,e.target)},250));this.touchEnd.dispatch(t,this.target),this.preV.x=0,this.preV.y=0,this.touch.startX=null,this.touch.startY=null,this.touch.moveX=null,this.touch.moveY=null}}},{key:"_cancelLongTap",value:function(){clearTimeout(this.longTapTimeout)}},{key:"_cancelSingleTap",value:function(){clearTimeout(this.singleTapTimeout)}},{key:"_cancel",value:function(){console.log("cancle")}},{key:"_emit",value:function(t,e){this.handles[t]||(this.handles[t]=[]);var s=o().isTarget(this.e,this.selector);if(s||!this.selector){this.selector&&(this.params.selector=s);for(var i=0,h=this.handles[t].length;i<h;i++)"function"==typeof this.handles[t][i]&&this.handles[t][i](e,this.params)}return!0}},{key:"on",value:function(t,e){return this.handles[t]||(this.handles[t]=[]),this.handles[t].push(e),this}},{key:"_init",value:function(){this.touch={},this.movetouch={},this.params={zoom:1,deltaX:0,deltaY:0,diffX:0,diffY:0,angle:0,direction:""}}},{key:"destroy",value:function(){return this.singleTapTimeout&&clearTimeout(this.singleTapTimeout),this.longTapTimeout&&clearTimeout(this.longTapTimeout),this.tapTimeout&&clearTimeout(this.tapTimeout),this.target.removeEventListener("touchstart",this._touch),this.target.removeEventListener("touchmove",this._move),this.target.removeEventListener("touchend",this._end),this.target.removeEventListener("touchcancel",this._cancel),this.touchStart.del(),this.touchMove.del(),this.touchCancel.del(),this.touchEnd.del(),this.singleTap.del(),this.longTap.del(),this.doubleTap.del(),this.tap.del(),null}}]),r);function r(t,e){if(i(this,r),this.target=t instanceof HTMLElement?t:"string"==typeof t?document.querySelector(t):null,!this.target)throw new Error("请绑定元素!");this._init(),this._touch=this._touch.bind(this),this._move=this._move.bind(this),this._end=this._end.bind(this),this._cancel=this._cancel.bind(this),this.target.addEventListener("touchstart",this._touch.bind(this),!1),this.target.addEventListener("touchmove",this._move.bind(this),!1),this.target.addEventListener("touchend",this._end.bind(this),!1),this.target.addEventListener("touchcancel",this._cancel.bind(this),!1),this.preV={x:null,y:null},this.isDoubleTap=!1,this.params={},this.touch={startX:null,startY:null,moveX:null,moveY:null,startTime:null,deltaTime:null,lastTime:null},this.movetouch={},this.pretouch={},this.longTapTimeout=this.singleTapTimeout=null,this.tapTimeout=null,this.handles={},this.preTapPostion={x:null,y:null};function s(){}this.touchStart=o().wrapFunc(this.target,e.touchStart||s),this.touchMove=o().wrapFunc(this.target,e.touchMove||s),this.touchCancel=o().wrapFunc(this.target,e.touchCancel||s),this.touchEnd=o().wrapFunc(this.target,e.touchEnd||s),this.singleTap=o().wrapFunc(this.target,e.singleTap||s),this.longTap=o().wrapFunc(this.target,e.longTap||s),this.doubleTap=o().wrapFunc(this.target,e.doubleTap||s),this.tap=o().wrapFunc(this.target,e.tap||s),this.pressMove=o().wrapFunc(this.target,e.pressMove||s),this.pressUp=o().wrapFunc(this.target,e.pressUp||s),this.pressDown=o().wrapFunc(this.target,e.pressDown||s),this.pressLeft=o().wrapFunc(this.target,e.pressLeft||s),this.pressRight=o().wrapFunc(this.target,e.pressRight||s)}try{document}catch(t){throw new Error("请在浏览器环境下运行")}var c=document.createElement("style");return c.type="text/css",c.innerHTML="body{    width: 100%;    height: 100vh;    background: #f7c695;}div{    width: 100px;    height: 100px;    border-radius: 100%;    background: #fff;}",document.getElementsByTagName("HEAD").item(0).appendChild(c),window.Gesture||u});
//# sourceMappingURL=gesture.min.js.map

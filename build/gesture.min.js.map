{"version":3,"sources":["gesture.js"],"names":["global","factory","exports","module","define","amd","self","GestureJs","this","classCallCheck","instance","Constructor","TypeError","createClass","protoProps","staticProps","defineProperties","prototype","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","HandlerAdmin","value","handler","handlers","push","splice","len","apply","el","arguments","DomElement","obj","selector","undefined","tagName","toUpperCase","matches","parentNode","handlerAdmin","add","$","Gesture","e","_this","point","touches","now","Date","touch","startX","pageX","startY","pageY","startTime","deltaTime","lastTime","touchStart","dispatch","preTapPostion","x","isDoubleTap","Math","abs","y","_cancelSingleTap","preV","_cancelLongTap","v","console","log","_preventTap","longTapTimeout","setTimeout","longTap","currentX","currentY","moveX","deltaX","deltaY","moveY","movedX","movedY","pressMove","touchMove","preventDefault","_this2","changedTouches","sx2","sy2","pressUp","pressDown","pressLeft","pressRight","tapTimeout","tap","doubleTap","singleTapTimeout","singleTap","touchEnd","clearTimeout","type","handles","currentTarget","isTarget","params","callback","movetouch","zoom","diffX","diffY","angle","direction","removeEventListener","_touch","_move","_end","_cancel","del","touchCancel","option","HTMLElement","document","querySelector","Error","_init","bind","addEventListener","pretouch","noop","wrapFunc","ex","style","createElement","innerHTML","getElementsByTagName","item","appendChild","window"],"mappings":"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","file":"gesture.min.js","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.GestureJs = factory());\n}(this, (function () { 'use strict';\n\n  var classCallCheck = function (instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  };\n\n  var createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  var HandlerAdmin = function () {\n      function HandlerAdmin(el) {\n          classCallCheck(this, HandlerAdmin);\n\n          this.handlers = [];\n          this.el = el;\n      }\n\n      createClass(HandlerAdmin, [{\n          key: 'add',\n          value: function add(handler) {\n              // 添加回调函数\n              this.handlers.push(handler);\n          }\n      }, {\n          key: 'del',\n          value: function del(handler) {\n              // 删除回调函数\n              if (!handler) this.handlers = [];\n              for (var i = this.handlers.length; i >= 0; i--) {\n                  if (this.handlers[i] === handler) {\n                      this.handlers.splice(i, 1);\n                  }\n              }        }\n      }, {\n          key: 'dispatch',\n          value: function dispatch() {\n              // 执行回调函数\n              for (var i = 0, len = this.handlers.length; i < len; i++) {\n                  var handler = this.handlers[i];\n                  if (typeof handler === 'function') handler.apply(this.el, arguments);\n              }\n          }\n      }]);\n      return HandlerAdmin;\n  }();\n\n  // 创建对象\n\n  var DomElement = function () {\n      function DomElement(selector) {\n          classCallCheck(this, DomElement);\n      }\n\n      createClass(DomElement, [{\n          key: 'isTarget',\n          value: function isTarget(obj, selector) {\n              while (obj != undefined && obj != null && obj.tagName.toUpperCase() != 'BODY') {\n                  if (obj.matches(selector)) {\n                      return obj;\n                  }\n                  obj = obj.parentNode;\n              }\n              return null;\n          }\n      }, {\n          key: 'wrapFunc',\n          value: function wrapFunc(el, handler) {\n              var handlerAdmin = new HandlerAdmin(el);\n              handlerAdmin.add(handler);\n              return handlerAdmin;\n          }\n      }]);\n      return DomElement;\n  }();\n\n  // new一个对象\n\n\n  function $(selector) {\n      return new DomElement(selector);\n  }\n\n  var Gesture = function () {\n      function Gesture(target, option) {\n          classCallCheck(this, Gesture);\n\n          this.target = target instanceof HTMLElement ? target : typeof target === 'string' ? document.querySelector(target) : null;\n          if (!this.target) {\n              throw new Error('请绑定元素!');\n          }        this._init();\n          this._touch = this._touch.bind(this);\n          this._move = this._move.bind(this);\n          this._end = this._end.bind(this);\n          this._cancel = this._cancel.bind(this);\n          this.target.addEventListener('touchstart', this._touch.bind(this), false);\n          this.target.addEventListener('touchmove', this._move.bind(this), false);\n          this.target.addEventListener('touchend', this._end.bind(this), false);\n          this.target.addEventListener('touchcancel', this._cancel.bind(this), false);\n\n          this.preV = { x: null, y: null };\n          this.isDoubleTap = false;\n\n          this.params = {};\n          this.touch = {\n              startX: null,\n              startY: null,\n              moveX: null,\n              moveY: null,\n              startTime: null,\n              deltaTime: null,\n              lastTime: null\n          }; //记录刚触摸的手指\n          this.movetouch = {}; //记录移动过程中变化的手指参数\n          this.pretouch = {}; //由于会触及到双击, 需要一个记录上一次触摸的对象\n          this.longTapTimeout = this.singleTapTimeout = null; //用于触发长按的定时器\n          this.tapTimeout = null; //用于触发点击的定时器\n          this.handles = {}; //用于存放回调函数的对象\n          this.preTapPostion = { x: null, y: null };\n\n          var noop = function noop() {};\n\n          this.touchStart = $().wrapFunc(this.target, option.touchStart || noop);\n          this.touchMove = $().wrapFunc(this.target, option.touchMove || noop);\n          this.touchCancel = $().wrapFunc(this.target, option.touchCancel || noop);\n          this.touchEnd = $().wrapFunc(this.target, option.touchEnd || noop);\n          this.singleTap = $().wrapFunc(this.target, option.singleTap || noop);\n          this.longTap = $().wrapFunc(this.target, option.longTap || noop);\n          this.doubleTap = $().wrapFunc(this.target, option.doubleTap || noop);\n          this.tap = $().wrapFunc(this.target, option.tap || noop);\n          this.pressMove = $().wrapFunc(this.target, option.pressMove || noop);\n          this.pressUp = $().wrapFunc(this.target, option.pressUp || noop);\n          this.pressDown = $().wrapFunc(this.target, option.pressDown || noop);\n          this.pressLeft = $().wrapFunc(this.target, option.pressLeft || noop);\n          this.pressRight = $().wrapFunc(this.target, option.pressRight || noop);\n      }\n\n      createClass(Gesture, [{\n          key: '_touch',\n          value: function _touch(e) {\n              var _this = this;\n\n              this.e = e.target;\n              var point = e.touches ? e.touches[0] : e;\n              var now = Date.now();\n\n              // 记录手指位置等参数\n              this.touch.startX = point.pageX;\n              this.touch.startY = point.pageY;\n              this.touch.startTime = now;\n              this.touch.deltaTime = this.touch.startTime - (this.touch.lastTime || this.touch.startTime);\n              this.touchStart.dispatch(e, this.target);\n\n              // 双击\n              if (this.preTapPostion.x !== null) {\n                  /**\n                   * 判断是否是双击\n                   * \n                   * 1,点击的时间必须是大于0秒 小于 250秒\n                   * \n                   * 2,移动的距离 x 小于 30 y 小于 30\n                   * \n                   */\n                  this.isDoubleTap = this.touch.deltaTime > 0 && this.touch.deltaTime < 250 && Math.abs(this.preTapPostion.x - this.touch.startX) < 30 && Math.abs(this.preTapPostion.y - this.touch.startY) < 30;\n                  // 如果是双击\n                  if (this.isDoubleTap) {\n                      // 取消单击\n                      this._cancelSingleTap();\n                  }\n              }\n\n              // 移动的距离\n              this.preTapPostion.x = this.touch.startX;\n              this.preTapPostion.y = this.touch.startY;\n              this.touch.lastTime = this.touch.startTime;\n              var preV = this.preV,\n                  len = e.touches.length;\n              if (len > 1) {\n                  this._cancelLongTap();\n                  this._cancelSingleTap();\n                  var v = { x: e.touches[1].pageX - this.touch.startX, y: e.touches[1].pageY - this.touch.startY };\n                  console.log(v);\n              }\n              this._preventTap = false;\n\n              // 长按逻辑\n              this.longTapTimeout = setTimeout(function () {\n                  _this.longTap.dispatch(e, _this.target);\n                  _this._preventTap = true;\n              }, 750);\n          }\n      }, {\n          key: '_move',\n          value: function _move(e) {\n              if (!e.touches) return;\n              var preV = this.preV,\n                  len = e.touches.length,\n                  currentX = e.touches[0].pageX,\n                  currentY = e.touches[0].pageY;\n              this.isDoubleTap = false;\n              if (this.touch.moveX !== null) {\n                  e.deltaX = currentX - this.touch.moveX;\n                  e.deltaY = currentY - this.touch.moveY;\n\n                  var movedX = Math.abs(this.touch.startX - this.touch.moveX),\n                      movedY = Math.abs(this.touch.startY - this.touch.moveY);\n                  if (movedX > 10 || movedY > 10) {\n                      this._preventTap = true;\n                  }\n              } else {\n                  e.deltaX = 0;\n                  e.deltaY = 0;\n              }\n\n              this.pressMove.dispatch(e, this.target);\n              this.touchMove.dispatch(e, this.target);\n              this._cancelLongTap();\n              this.touch.moveX = currentX;\n              this.touch.moveY = currentY;\n\n              if (len > 1) {\n                  e.preventDefault();\n              }\n          }\n      }, {\n          key: '_end',\n          value: function _end(e) {\n              var _this2 = this;\n\n              if (!e.changedTouches) return;\n              this._cancelLongTap();\n              // 多指操作\n              if (e.touches.length < 2) {\n                  this.sx2 = this.sy2 = null;\n              }\n\n              // 如果移动的距离超过了30\n              if (this.touch.moveX && Math.abs(this.touch.startX - this.touch.moveX) > 30 || this.touch.moveY && Math.abs(this.touch.startY - this.touch.moveY) > 30) {\n                  var deltaX = ~~((this.touch.moveX || 0) - this.touch.startX),\n                      deltaY = ~~((this.touch.moveY || 0) - this.touch.startY);\n                  if (Math.abs(deltaX) < Math.abs(deltaY)) {\n                      if (deltaY < 0) {\n                          this.pressUp.dispatch(e, this.target);\n                      } else {\n                          this.pressDown.dispatch(e, this.target);\n                      }\n                  } else {\n                      if (deltaX < 0) {\n                          this.pressLeft.dispatch(e, this.target);\n                      } else {\n                          this.pressRight.dispatch(e, this.target);\n                      }\n                  }\n              } else {\n                  // 如果移动的距离没有超过30 则判断是单击 双击\n                  this.tapTimeout = setTimeout(function () {\n                      if (!_this2._preventTap) {\n                          // 单次点击\n                          _this2.tap.dispatch(e, _this2.target);\n                      }\n                      // 双击\n                      if (_this2.isDoubleTap) {\n                          _this2.doubleTap.dispatch(e, _this2.target);\n                          _this2.isDoubleTap = false;\n                      }\n                  }, 0);\n\n                  if (!this.isDoubleTap) {\n                      this.singleTapTimeout = setTimeout(function () {\n                          _this2.singleTap.dispatch(e, _this2.target);\n                      }, 250);\n                  }\n              }\n\n              this.touchEnd.dispatch(e, this.target);\n              this.preV.x = 0;\n              this.preV.y = 0;\n              this.touch.startX = null;\n              this.touch.startY = null;\n              this.touch.moveX = null;\n              this.touch.moveY = null;\n          }\n      }, {\n          key: '_cancelLongTap',\n          value: function _cancelLongTap() {\n              clearTimeout(this.longTapTimeout);\n          }\n      }, {\n          key: '_cancelSingleTap',\n          value: function _cancelSingleTap() {\n              clearTimeout(this.singleTapTimeout);\n          }\n      }, {\n          key: '_cancel',\n          value: function _cancel() {\n              console.log('cancle');\n          }\n      }, {\n          key: '_emit',\n          value: function _emit(type, e) {\n              !this.handles[type] && (this.handles[type] = []);\n              var currentTarget = $().isTarget(this.e, this.selector);\n              if (currentTarget || !this.selector) {\n                  this.selector && (this.params.selector = currentTarget);\n                  for (var i = 0, len = this.handles[type].length; i < len; i++) {\n                      // 如果回调的是函数类型 则执行回调函数\n                      typeof this.handles[type][i] === 'function' && this.handles[type][i](e, this.params);\n                  }\n              }\n              return true;\n          }\n      }, {\n          key: 'on',\n          value: function on(type, callback) {\n              !this.handles[type] && (this.handles[type] = []);\n              this.handles[type].push(callback);\n              return this;\n          }\n      }, {\n          key: '_init',\n          value: function _init() {\n              this.touch = {};\n              this.movetouch = {};\n              this.params = { zoom: 1, deltaX: 0, deltaY: 0, diffX: 0, diffY: 0, angle: 0, direction: '' };\n          }\n      }, {\n          key: 'destroy',\n          value: function destroy() {\n              // 清空定时器\n              if (this.singleTapTimeout) clearTimeout(this.singleTapTimeout);\n              if (this.longTapTimeout) clearTimeout(this.longTapTimeout);\n              if (this.tapTimeout) clearTimeout(this.tapTimeout);\n\n              this.target.removeEventListener('touchstart', this._touch);\n              this.target.removeEventListener('touchmove', this._move);\n              this.target.removeEventListener('touchend', this._end);\n              this.target.removeEventListener('touchcancel', this._cancel);\n\n              this.touchStart.del();\n              this.touchMove.del();\n              this.touchCancel.del();\n              this.touchEnd.del();\n              this.singleTap.del();\n              this.longTap.del();\n              this.doubleTap.del();\n              this.tap.del();\n\n              return null;\n          }\n      }]);\n      return Gesture;\n  }();\n\n  try {\n      document;\n  } catch (ex) {\n      throw new Error('请在浏览器环境下运行');\n  }\n\n  var inlinecss = 'body{    width: 100%;    height: 100vh;    background: #f7c695;}div{    width: 100px;    height: 100px;    border-radius: 100%;    background: #fff;}';\n  var style = document.createElement('style');\n  style.type = 'text/css';\n  style.innerHTML = inlinecss;\n  document.getElementsByTagName('HEAD').item(0).appendChild(style);\n\n  var gesture = window.Gesture || Gesture;\n\n  return gesture;\n\n})));\n"]}
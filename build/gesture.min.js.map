{"version":3,"sources":["gesture.js"],"names":["global","factory","exports","module","define","amd","self","GestureJs","this","classCallCheck","instance","Constructor","TypeError","createClass","protoProps","staticProps","defineProperties","prototype","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","HandlerAdmin","value","handler","handlers","push","splice","len","apply","el","arguments","DomElement","obj","selector","undefined","tagName","toUpperCase","matches","parentNode","handlerAdmin","add","$","Gesture","e","_this","point","touches","now","Date","touch","startX","pageX","startY","pageY","startTime","deltaTime","lastTime","touchStart","dispatch","preTapPostion","x","isDoubleTap","Math","abs","y","_cancelSingleTap","preV","_cancelLongTap","v","console","log","_preventTap","isLongTap","longTapTimeout","setTimeout","longTap","currentX","currentY","moveX","deltaX","deltaY","moveY","diffX","movedX","movedY","pressMove","touchMove","preventDefault","_this2","changedTouches","sx2","sy2","pressUp","pressDown","pressLeft","pressRight","tapTimeout","tap","doubleTap","singleTapTimeout","singleTap","touchEnd","clearTimeout","type","handles","currentTarget","isTarget","params","callback","movetouch","zoom","diffY","angle","direction","cancelAll","touchCancel","removeEventListener","_touch","_move","_end","_cancel","del","option","HTMLElement","document","querySelector","Error","bind","addEventListener","pretouch","noop","wrapFunc","ex","style","createElement","innerHTML","getElementsByTagName","item","appendChild","window"],"mappings":"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","file":"gesture.min.js","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.GestureJs = factory());\n}(this, (function () { 'use strict';\n\n  var classCallCheck = function (instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  };\n\n  var createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  var HandlerAdmin = function () {\n      function HandlerAdmin(el) {\n          classCallCheck(this, HandlerAdmin);\n\n          this.handlers = [];\n          this.el = el;\n      }\n\n      createClass(HandlerAdmin, [{\n          key: 'add',\n          value: function add(handler) {\n              // 添加回调函数\n              this.handlers.push(handler);\n          }\n      }, {\n          key: 'del',\n          value: function del(handler) {\n              // 删除回调函数\n              if (!handler) this.handlers = [];\n              for (var i = this.handlers.length; i >= 0; i--) {\n                  if (this.handlers[i] === handler) {\n                      this.handlers.splice(i, 1);\n                  }\n              }        }\n      }, {\n          key: 'dispatch',\n          value: function dispatch() {\n              // 执行回调函数\n              for (var i = 0, len = this.handlers.length; i < len; i++) {\n                  var handler = this.handlers[i];\n                  if (typeof handler === 'function') handler.apply(this.el, arguments);\n              }\n          }\n      }]);\n      return HandlerAdmin;\n  }();\n\n  // 创建对象\n\n  var DomElement = function () {\n      function DomElement(selector) {\n          classCallCheck(this, DomElement);\n      }\n\n      createClass(DomElement, [{\n          key: 'isTarget',\n          value: function isTarget(obj, selector) {\n              while (obj != undefined && obj != null && obj.tagName.toUpperCase() != 'BODY') {\n                  if (obj.matches(selector)) {\n                      return obj;\n                  }\n                  obj = obj.parentNode;\n              }\n              return null;\n          }\n      }, {\n          key: 'wrapFunc',\n          value: function wrapFunc(el, handler) {\n              var handlerAdmin = new HandlerAdmin(el);\n              handlerAdmin.add(handler);\n              return handlerAdmin;\n          }\n      }]);\n      return DomElement;\n  }();\n\n  // new一个对象\n\n\n  function $(selector) {\n      return new DomElement(selector);\n  }\n\n  var Gesture = function () {\n      function Gesture(target, option) {\n          classCallCheck(this, Gesture);\n\n          this.target = target instanceof HTMLElement ? target : typeof target === 'string' ? document.querySelector(target) : null;\n          if (!this.target) {\n              throw new Error('请绑定元素!');\n          }        this._touch = this._touch.bind(this);\n          this._move = this._move.bind(this);\n          this._end = this._end.bind(this);\n          this._cancel = this._cancel.bind(this);\n          this.target.addEventListener('touchstart', this._touch.bind(this), false);\n          this.target.addEventListener('touchmove', this._move.bind(this), false);\n          this.target.addEventListener('touchend', this._end.bind(this), false);\n          this.target.addEventListener('touchcancel', this._cancel.bind(this), false);\n\n          this.preV = { x: null, y: null };\n          this.isDoubleTap = false;\n          this.isLongTap = false;\n\n          this.params = {};\n          this.touch = {\n              startX: null,\n              startY: null,\n              moveX: null,\n              moveY: null,\n              diffX: null,\n              startTime: null,\n              deltaTime: null,\n              lastTime: null\n          }; //记录刚触摸的手指\n          this.movetouch = {}; //记录移动过程中变化的手指参数\n          this.pretouch = {}; //由于会触及到双击, 需要一个记录上一次触摸的对象\n          this.longTapTimeout = this.singleTapTimeout = null; //用于触发长按的定时器\n          this.tapTimeout = null; //用于触发点击的定时器\n          this.handles = {}; //用于存放回调函数的对象\n          this.preTapPostion = { x: null, y: null };\n\n          var noop = function noop() {};\n\n          this.touchStart = $().wrapFunc(this.target, option.touchStart || noop);\n          this.touchMove = $().wrapFunc(this.target, option.touchMove || noop);\n          this.touchCancel = $().wrapFunc(this.target, option.touchCancel || noop);\n          this.touchEnd = $().wrapFunc(this.target, option.touchEnd || noop);\n          this.singleTap = $().wrapFunc(this.target, option.singleTap || noop);\n          this.longTap = $().wrapFunc(this.target, option.longTap || noop);\n          this.doubleTap = $().wrapFunc(this.target, option.doubleTap || noop);\n          this.tap = $().wrapFunc(this.target, option.tap || noop);\n          this.pressMove = $().wrapFunc(this.target, option.pressMove || noop);\n          this.pressUp = $().wrapFunc(this.target, option.pressUp || noop);\n          this.pressDown = $().wrapFunc(this.target, option.pressDown || noop);\n          this.pressLeft = $().wrapFunc(this.target, option.pressLeft || noop);\n          this.pressRight = $().wrapFunc(this.target, option.pressRight || noop);\n      }\n\n      createClass(Gesture, [{\n          key: '_touch',\n          value: function _touch(e) {\n              var _this = this;\n\n              this.e = e.target;\n              var point = e.touches ? e.touches[0] : e;\n              var now = Date.now();\n\n              // 记录手指位置等参数\n              this.touch.startX = point.pageX;\n              this.touch.startY = point.pageY;\n              this.touch.startTime = now;\n              this.touch.deltaTime = this.touch.startTime - (this.touch.lastTime || this.touch.startTime);\n              this.touchStart.dispatch(e, this.target);\n\n              // 双击\n              if (this.preTapPostion.x !== null) {\n                  /**\n                   * 判断是否是双击\n                   * \n                   * 1,点击的时间必须是大于0秒 小于 250秒\n                   * \n                   * 2,移动的距离 x 小于 30 y 小于 30\n                   * \n                   */\n                  this.isDoubleTap = this.touch.deltaTime > 0 && this.touch.deltaTime < 250 && Math.abs(this.preTapPostion.x - this.touch.startX) < 30 && Math.abs(this.preTapPostion.y - this.touch.startY) < 30;\n                  // 如果是双击\n                  if (this.isDoubleTap) {\n                      // 取消单击\n                      this._cancelSingleTap();\n                  }\n              }\n\n              // 移动的距离\n              this.preTapPostion.x = this.touch.startX;\n              this.preTapPostion.y = this.touch.startY;\n              this.touch.lastTime = this.touch.startTime;\n              var preV = this.preV,\n                  len = e.touches.length;\n              if (len > 1) {\n                  this._cancelLongTap();\n                  this._cancelSingleTap();\n                  var v = { x: e.touches[1].pageX - this.touch.startX, y: e.touches[1].pageY - this.touch.startY };\n                  console.log(v);\n              }\n              this._preventTap = false;\n\n              // 长按逻辑\n              this.isLongTap = false;\n              this.longTapTimeout = setTimeout(function () {\n                  _this.longTap.dispatch(e, _this.target);\n                  _this._preventTap = true;\n                  _this.isLongTap = true;\n              }, 750);\n          }\n      }, {\n          key: '_move',\n          value: function _move(e) {\n              if (!e.touches) return;\n              var preV = this.preV,\n                  len = e.touches.length,\n                  currentX = e.touches[0].pageX,\n                  currentY = e.touches[0].pageY;\n              this.isDoubleTap = false;\n              if (this.touch.moveX !== null) {\n                  e.deltaX = currentX - this.touch.moveX;\n                  e.deltaY = currentY - this.touch.moveY;\n                  this.touch.diffX = e.deltaX;\n                  var movedX = Math.abs(this.touch.startX - this.touch.moveX),\n                      movedY = Math.abs(this.touch.startY - this.touch.moveY);\n                  if (movedX > 10 || movedY > 10) {\n                      this._preventTap = true;\n                  }\n              } else {\n                  e.deltaX = 0;\n                  e.deltaY = 0;\n              }\n\n              this.pressMove.dispatch(e, this.target);\n              this.touchMove.dispatch(e, this.target);\n              this._cancelLongTap();\n              this.touch.moveX = currentX;\n              this.touch.moveY = currentY;\n\n              if (len > 1) {\n                  e.preventDefault();\n              }\n          }\n      }, {\n          key: '_end',\n          value: function _end(e) {\n              var _this2 = this;\n\n              e.preventDefault();\n              if (!e.changedTouches) return;\n              this._cancelLongTap();\n              // 多指操作\n              if (e.touches.length < 2) {\n                  this.sx2 = this.sy2 = null;\n              }\n\n              // 如果移动的距离超过了30\n              if (this.touch.moveX && Math.abs(this.touch.startX - this.touch.moveX) > 30 || this.touch.moveY && Math.abs(this.touch.startY - this.touch.moveY) > 30) {\n                  var deltaX = ~~((this.touch.moveX || 0) - this.touch.startX),\n                      deltaY = ~~((this.touch.moveY || 0) - this.touch.startY);\n                  if (Math.abs(deltaX) < Math.abs(deltaY)) {\n                      if (deltaY < 0) {\n                          this.pressUp.dispatch(e, this.target);\n                      } else {\n                          this.pressDown.dispatch(e, this.target);\n                      }\n                  } else {\n                      var diffX = this.touch.diffX;\n\n                      e.diffX = diffX;\n                      if (deltaX < 0) {\n                          this.pressLeft.dispatch(e, this.target);\n                      } else {\n                          this.pressRight.dispatch(e, this.target);\n                      }\n                  }\n              } else {\n                  // 如果移动的距离没有超过30 则判断是单击 双击\n                  this.tapTimeout = setTimeout(function () {\n                      if (!_this2._preventTap) {\n                          // 单次点击\n                          _this2.tap.dispatch(e, _this2.target);\n                      }\n                      // 双击\n                      if (_this2.isDoubleTap) {\n                          _this2.doubleTap.dispatch(e, _this2.target);\n                          _this2.isDoubleTap = false;\n                      }\n                  }, 0);\n\n                  if (!this.isDoubleTap && !this.isLongTap) {\n                      this.singleTapTimeout = setTimeout(function () {\n                          _this2.singleTap.dispatch(e, _this2.target);\n                      }, 250);\n                  }\n              }\n\n              this.touchEnd.dispatch(e, this.target);\n              this.preV.x = 0;\n              this.preV.y = 0;\n              this.touch.startX = null;\n              this.touch.startY = null;\n              this.touch.moveX = null;\n              this.touch.moveY = null;\n          }\n      }, {\n          key: '_cancelLongTap',\n          value: function _cancelLongTap() {\n              clearTimeout(this.longTapTimeout);\n          }\n      }, {\n          key: '_cancelSingleTap',\n          value: function _cancelSingleTap() {\n              clearTimeout(this.singleTapTimeout);\n          }\n      }, {\n          key: '_emit',\n          value: function _emit(type, e) {\n              !this.handles[type] && (this.handles[type] = []);\n              var currentTarget = $().isTarget(this.e, this.selector);\n              if (currentTarget || !this.selector) {\n                  this.selector && (this.params.selector = currentTarget);\n                  for (var i = 0, len = this.handles[type].length; i < len; i++) {\n                      // 如果回调的是函数类型 则执行回调函数\n                      typeof this.handles[type][i] === 'function' && this.handles[type][i](e, this.params);\n                  }\n              }\n              return true;\n          }\n      }, {\n          key: 'on',\n          value: function on(type, callback) {\n              !this.handles[type] && (this.handles[type] = []);\n              this.handles[type].push(callback);\n              return this;\n          }\n      }, {\n          key: '_init',\n          value: function _init() {\n              this.touch = {};\n              this.movetouch = {};\n              this.params = { zoom: 1, deltaX: 0, deltaY: 0, diffX: 0, diffY: 0, angle: 0, direction: '' };\n          }\n      }, {\n          key: 'cancelAll',\n          value: function cancelAll() {\n              this._preventTap = true;\n              clearTimeout(this.singleTapTimeout);\n              clearTimeout(this.longTapTimeout);\n              clearTimeout(this.tapTimeout);\n          }\n      }, {\n          key: '_cancel',\n          value: function _cancel(e) {\n              this.cancelAll();\n              this.touchCancel.dispatch(e, this.target);\n          }\n      }, {\n          key: 'destroy',\n          value: function destroy() {\n              // 清空定时器\n              if (this.singleTapTimeout) clearTimeout(this.singleTapTimeout);\n              if (this.longTapTimeout) clearTimeout(this.longTapTimeout);\n              if (this.tapTimeout) clearTimeout(this.tapTimeout);\n\n              this.target.removeEventListener('touchstart', this._touch);\n              this.target.removeEventListener('touchmove', this._move);\n              this.target.removeEventListener('touchend', this._end);\n              this.target.removeEventListener('touchcancel', this._cancel);\n\n              this.touchStart.del();\n              this.touchMove.del();\n              this.touchCancel.del();\n              this.touchEnd.del();\n              this.singleTap.del();\n              this.longTap.del();\n              this.doubleTap.del();\n              this.tap.del();\n\n              return null;\n          }\n      }]);\n      return Gesture;\n  }();\n\n  try {\n      document;\n  } catch (ex) {\n      throw new Error('请在浏览器环境下运行');\n  }\n\n  var inlinecss = 'body{    margin: 0;    padding: 0;}li{    list-style: none;}.gestureDom_wrap{    width: 100px;    height: 100px;    background: #f7c695;    border-radius: 100%;}.gestureDom_info{    width: 100%;    text-align: center;    position: fixed;    padding: 20px 0px;    bottom: 10vh;    font-size: 40px;    font-weight: 600;    color: #000;}.gestureDom_listWrap{    width: 100%;    height: 100px;    position: relative;    overflow: hidden;}.gestureDom_listMain{    height: 100%;    position: absolute;    top: 0;    left: 0;    display: -webkit-box;    display: -webkit-flex;    display: -ms-flexbox;    display: flex;    white-space: nowrap;}.gestureDom_listItem{    width: 100px;    margin-right: 10px;    background: #f7c695;    display: -webkit-box;    display: -webkit-flex;    display: -ms-flexbox;    display: flex;    -webkit-box-align: center;    -webkit-align-items: center;        -ms-flex-align: center;            align-items: center;    -webkit-box-pack: center;    -webkit-justify-content: center;        -ms-flex-pack: center;            justify-content: center;}';\n  var style = document.createElement('style');\n  style.type = 'text/css';\n  style.innerHTML = inlinecss;\n  document.getElementsByTagName('HEAD').item(0).appendChild(style);\n\n  var gesture = window.Gesture || Gesture;\n\n  return gesture;\n\n})));\n"]}